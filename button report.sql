 SELECT x.name,x.date,x.company,x.supplier,x.ref_date,x.location,x.fabric_type,x.ref_no,x.colour,CONCAT("<form action=",x.image,"><button>Image</button></form>") as image,x.dia,x.gsm,x.roll,x.kgs,x.rate,x.amount,x.rack_name from (SELECT tm.name,date,company,supplier,ref_date,tm.location,tx.fabric_type,tx.ref_no,tx.colour,CONCAT("https://erpnext.glenmargon.com",tm.image) as image,tx.dia,tx.gsm,tx.roll,tx.kgs,tx.rate,tx.amount,tz.rack_name from `tabSurplus Fabric Inward` tm left join `tabSFI` tx on tm.name=tx.parent left join `tabSFI Rolls Details` tz on tm.name=tz.parent and tx.fabric_type = tz.fabric_type and tx.parent=tz.parent and tx.colour = tz.colour and tx.dia = tz.dia and tx.gsm = tz.gsm and  tx.idx = tz.idx and  tx.roll = tz.roll and  tx.rate = tz.rate and  tx.amount = tz.amount and  tx.kgs = tz.kgs and  tx.ref_no = tz.ref_no and tm.docstatus<2) as x where 1=1
